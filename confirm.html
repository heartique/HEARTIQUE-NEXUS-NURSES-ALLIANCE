<!DOCTYPE html>
<html>
<head>
  <title>Confirming...</title>
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js"></script>
</head>
<body>
  <p>Confirming your email, please wait...</p>

  <script>
    const urlParams = new URLSearchParams(window.location.hash);
    const access_token = urlParams.get('#access_token') || urlParams.get('access_token');

    const supabase = supabase.createClient(
      "https://gbqgtnukoucxagswqspx.supabase.co",
      "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImdicWd0bnVrb3VjeGFnc3dxc3B4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTA4ODcwNTAsImV4cCI6MjA2NjQ2MzA1MH0.uHqKZ-KnW1sv7CSD37D6dh1qYfSLMznud947DEZI93Q"
    );

    async function confirmAndRedirect() {
      const { data, error } = await supabase.auth.getSession();
      if (data.session) {
        window.location.href = "index.html"; // or your real dashboard
      } else {
        setTimeout(confirmAndRedirect, 1000); // Retry until session is active
      }
    }

    confirmAndRedirect();
  </script>
</body>
</html>
