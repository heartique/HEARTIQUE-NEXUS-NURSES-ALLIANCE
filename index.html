<!DOCTYPE html>
<html lang="en">
<head>
  <!-- 🌙 Dark/Light Theme Setup -->
  <script>
    const savedTheme = localStorage.getItem("theme");
    const prefersDark = window.matchMedia("(prefers-color-scheme: dark)").matches;
    const theme = savedTheme || (prefersDark ? "dark" : "light");
    document.documentElement.setAttribute("data-theme", theme);
  </script>
  
  <!-- ⚙ Basic Meta -->
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- 🔍 SEO -->
  <title>Heartique Nexus Dashboard</title>
  <meta name="description" content="The ultimate dashboard for Heartique Nursing Nexus – study tools, updates, and essential nursing resources.">
  <meta name="keywords" content="nursing, notes, dashboard, CHK, Heartique nursing nexus alliance, study, PTS, Kenya">
  <meta name="author" content="Heartique Nursing Nexus Team">
  <meta name="robots" content="index, follow">

  <!-- 🌐 Open Graph (Facebook, WhatsApp, etc.) -->
<meta property="og:title" content="Heartique Nursing Nexus Dashboard">
<meta property="og:description" content="Your go-to platform for nursing tools, updates, and notes.">
<meta property="og:image" content="icon-512.png">
<meta property="og:url" content="https://heartique.github.io/HEARTIQUE-NEXUS-NURSES-ALLIANCE/">
<meta property="og:type" content="website">

<!-- 🐦 Twitter Card -->
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="Heartique Nursing Nexus Dashboard">
<meta name="twitter:description" content="Your essential nursing study portal – accessible, simple, powerful.">
<meta name="twitter:image" content="icon-512.png">

  <!-- 📷 Icons -->
  <link rel="icon" type="image/png" sizes="32x32" href="favicon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="icon-192.png">
  <link rel="icon" type="image/png" sizes="192x192" href="icon-192.png">
  <link rel="icon" type="image/png" sizes="512x512" href="icon-512.png">
  <link rel="apple-touch-icon" href="icon-192.png">

  <!-- 🧭 Manifest + PWA Meta -->
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#667eea">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

  <!-- 🎨 Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Plus+Jakarta+Sans:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">

  <style>
    :root {
      /* Modern Color Palette */
      --primary-gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      --secondary-gradient: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
      --success-gradient: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
      --warning-gradient: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);
      
      /* Semantic Colors */
      --bg-primary: #ffffff;
      --bg-secondary: #f8fafc;
      --bg-tertiary: #f1f5f9;
      --text-primary: #1e293b;
      --text-secondary: #64748b;
      --text-tertiary: #94a3b8;
      
      /* Accent Colors */
      --accent-blue: #3b82f6;
      --accent-purple: #8b5cf6;
      --accent-pink: #ec4899;
      --accent-green: #10b981;
      --accent-orange: #f59e0b;
      
      /* Shadows */
      --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
      --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
      --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
      --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
      --shadow-glow: 0 0 30px rgba(102, 126, 234, 0.3);
      
      /* Border Radius */
      --radius-sm: 6px;
      --radius-md: 12px;
      --radius-lg: 16px;
      --radius-xl: 24px;
      
      /* Spacing */
      --space-xs: 0.5rem;
      --space-sm: 0.75rem;
      --space-md: 1rem;
      --space-lg: 1.5rem;
      --space-xl: 2rem;
      --space-2xl: 3rem;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      background-attachment: fixed;
      min-height: 100vh;
      color: var(--text-primary);
      line-height: 1.6;
      overflow-x: hidden;
    }

    /* Modern Header */
    header {
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(20px);
      border-bottom: 1px solid rgba(255, 255, 255, 0.2);
      box-shadow: var(--shadow-lg);
      position: sticky;
      top: 0;
      z-index: 100;
    }

    header h1 {
      background: var(--primary-gradient);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      font-family: 'Plus Jakarta Sans', sans-serif;
      font-weight: 800;
      font-size: clamp(1.5rem, 4vw, 2.2rem);
      text-align: center;
      padding: var(--space-lg);
      margin: 0;
      letter-spacing: -0.02em;
    }

    /* Top Bar Styling */
    #topBar {
      background: rgba(255, 255, 255, 0.98);
      backdrop-filter: blur(20px);
      border-bottom: 1px solid rgba(0, 0, 0, 0.05);
      box-shadow: var(--shadow-sm);
      padding: var(--space-lg) var(--space-xl);
      display: flex;
      justify-content: space-between;
      align-items: center;
      position: relative;
    }

    #topBar h1 {
      background: var(--primary-gradient);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      font-size: 1.5rem;
      font-weight: 700;
      padding: 0;
    }

    #profileBtn {
      background: var(--primary-gradient);
      border: none;
      border-radius: 50%;
      width: 48px;
      height: 48px;
      color: white;
      font-size: 1.2rem;
      cursor: pointer;
      box-shadow: var(--shadow-md);
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      display: flex;
      align-items: center;
      justify-content: center;
    }

    #profileBtn:hover {
      transform: translateY(-2px);
      box-shadow: var(--shadow-xl);
    }

    /* Profile Modal */
    #profileModal {
      background: white;
      border-radius: var(--radius-lg);
      box-shadow: var(--shadow-xl);
      border: 1px solid rgba(0, 0, 0, 0.05);
      padding: var(--space-xl);
      min-width: 280px;
      position: absolute;
      top: 70px;
      right: var(--space-xl);
      z-index: 1000;
      animation: slideDown 0.3s ease-out;
    }

    @keyframes slideDown {
      from {
        opacity: 0;
        transform: translateY(-10px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    #profileModal p {
      margin-bottom: var(--space-sm);
      color: var(--text-secondary);
    }

    #profileModal button {
      width: 100%;
      padding: var(--space-sm) var(--space-md);
      border: none;
      border-radius: var(--radius-sm);
      font-weight: 500;
      cursor: pointer;
      transition: all 0.2s ease;
      margin-bottom: var(--space-sm);
    }

    #profileModal button:first-of-type {
      background: linear-gradient(135deg, #f87171 0%, #ef4444 100%);
      color: white;
    }

    #profileModal button:last-of-type {
      background: var(--bg-tertiary);
      color: var(--text-primary);
    }

    /* Main Container */
    main {
      max-width: 1200px;
      margin: 0 auto;
      padding: var(--space-xl);
      position: relative;
    }

    /* Welcome Message Card */
    .welcome-msg {
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(20px);
      border-radius: var(--radius-xl);
      padding: var(--space-2xl);
      margin-bottom: var(--space-xl);
      box-shadow: var(--shadow-lg);
      border: 1px solid rgba(255, 255, 255, 0.2);
      position: relative;
      overflow: hidden;
    }

    .welcome-msg::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 4px;
      background: var(--primary-gradient);
    }

    .welcome-msg h1 {
      font-family: 'Plus Jakarta Sans', sans-serif;
      font-size: 2rem;
      font-weight: 700;
      margin-bottom: var(--space-md);
      background: var(--primary-gradient);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .welcome-msg p {
      color: var(--text-secondary);
      line-height: 1.7;
      margin-bottom: var(--space-md);
    }

    .contact {
      background: var(--bg-tertiary);
      padding: var(--space-lg);
      border-radius: var(--radius-md);
      margin-top: var(--space-lg);
    }

    .contact a {
      color: var(--accent-blue);
      text-decoration: none;
      font-weight: 500;
      transition: color 0.2s ease;
    }

    .contact a:hover {
      color: var(--accent-purple);
    }

    /* Search Bar */
    #searchBar {
      width: 100%;
      padding: var(--space-lg);
      font-size: 1rem;
      border: 2px solid rgba(102, 126, 234, 0.2);
      border-radius: var(--radius-lg);
      background: rgba(255, 255, 255, 0.9);
      backdrop-filter: blur(10px);
      margin-bottom: var(--space-xl);
      transition: all 0.3s ease;
      box-shadow: var(--shadow-sm);
    }

    #searchBar:focus {
      outline: none;
      border-color: var(--accent-blue);
      box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
    }

    /* Section Cards */
    section {
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(20px);
      border-radius: var(--radius-xl);
      padding: var(--space-2xl);
      margin-bottom: var(--space-xl);
      box-shadow: var(--shadow-lg);
      border: 1px solid rgba(255, 255, 255, 0.2);
      transition: transform 0.3s ease;
    }

    section:hover {
      transform: translateY(-4px);
    }

    section h2 {
      font-family: 'Plus Jakarta Sans', sans-serif;
      font-size: 1.5rem;
      font-weight: 700;
      margin-bottom: var(--space-lg);
      background: var(--primary-gradient);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      display: flex;
      align-items: center;
      gap: var(--space-sm);
    }

    /* Modern Grid Layout */
    ul {
      list-style: none;
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: var(--space-lg);
      padding: 0;
    }

    ul li {
      background: linear-gradient(135deg, rgba(102, 126, 234, 0.1) 0%, rgba(118, 75, 162, 0.1) 100%);
      border: 1px solid rgba(102, 126, 234, 0.2);
      border-radius: var(--radius-lg);
      padding: var(--space-lg);
      cursor: pointer;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      text-align: center;
      font-weight: 500;
      position: relative;
      overflow: hidden;
    }

    ul li::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
      transition: left 0.5s ease;
    }

    ul li:hover::before {
      left: 100%;
    }

    ul li:hover {
      transform: translateY(-6px);
      box-shadow: var(--shadow-xl);
      border-color: var(--accent-blue);
    }

    /* Special Highlight Cards */
    .main-nck-paper {
      background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%) !important;
      color: white !important;
      font-weight: 700 !important;
      font-size: 1.2rem !important;
      border: none !important;
      box-shadow: var(--shadow-glow) !important;
      animation: pulse 3s infinite;
    }

    .main-FQE-paper {
      background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%) !important;
      color: white !important;
      font-weight: 700 !important;
      font-size: 1.1rem !important;
      border: none !important;
    }

    .main-objective-tab {
      background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%) !important;
      color: white !important;
      font-weight: 700 !important;
      font-size: 1.3rem !important;
      border: none !important;
      grid-column: 1 / -1;
    }

    .main-vip-books {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%) !important;
      color: white !important;
      font-weight: 600 !important;
      border: none !important;
    }

    @keyframes pulse {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.02); }
    }

    /* Custom Tab Container */
    .custom-tab-container {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
      gap: var(--space-xl);
      padding: var(--space-xl) 0;
      max-width: 1000px;
      margin: 0 auto;
    }

    .custom-tab-card {
      background: linear-gradient(135deg, #1e293b 0%, #334155 100%);
      border-radius: var(--radius-lg);
      padding: var(--space-xl);
      text-decoration: none;
      color: white;
      min-height: 180px;
      display: flex;
      flex-direction: column;
      justify-content: center;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      position: relative;
      overflow: hidden;
      box-shadow: var(--shadow-lg);
    }

    .custom-tab-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: linear-gradient(45deg, transparent, rgba(255, 255, 255, 0.1), transparent);
      transform: translateX(-100%);
      transition: transform 0.6s ease;
    }

    .custom-tab-card:hover::before {
      transform: translateX(100%);
    }

    .custom-tab-card:hover {
      transform: translateY(-8px) scale(1.02);
      box-shadow: var(--shadow-xl);
    }

    .custom-tab-vocab {
      background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
    }

    .custom-tab-abbrev {
      background: linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%);
    }

    .tab-icon {
      font-size: 2.5rem;
      margin-bottom: var(--space-md);
    }

    .tab-content h2 {
      margin: 0 0 var(--space-sm);
      font-size: 1.3rem;
      font-weight: 700;
      color: white !important;
      background: none !important;
      -webkit-text-fill-color: white !important;
    }

    .tab-content p {
      margin: 0 0 var(--space-md);
      font-size: 0.9rem;
      opacity: 0.9;
      line-height: 1.5;
    }

    .badge {
      background: rgba(255, 255, 255, 0.2);
      backdrop-filter: blur(10px);
      color: white;
      padding: var(--space-xs) var(--space-sm);
      border-radius: var(--radius-sm);
      font-size: 0.8rem;
      font-weight: 600;
      display: inline-block;
    }

    /* Noticeboard */
    #noticeboard {
      background: linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%);
      border: none;
      color: white;
      border-radius: var(--radius-lg);
      margin: var(--space-xl) 0;
      padding: var(--space-xl);
      box-shadow: var(--shadow-lg);
    }

    #noticeboard h3 {
      color: white;
      margin-bottom: var(--space-md);
      font-size: 1.3rem;
    }

    #toggleNotice {
      background: rgba(255, 255, 255, 0.2);
      backdrop-filter: blur(10px);
      color: white;
      border: none;
      padding: var(--space-sm) var(--space-lg);
      border-radius: var(--radius-md);
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s ease;
    }

    #toggleNotice:hover {
      background: rgba(255, 255, 255, 0.3);
    }

    /* Understanding Tracker */
    #understandingTracker {
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(20px);
      border-radius: var(--radius-xl);
      padding: var(--space-2xl);
      margin: var(--space-2xl) auto;
      box-shadow: var(--shadow-lg);
      border: 1px solid rgba(255, 255, 255, 0.2);
    }

    #understandingTracker h2 {
      text-align: center;
      margin-bottom: var(--space-lg);
      font-size: 1.8rem;
    }

    .tracker-item {
      background: var(--bg-secondary);
      border-radius: var(--radius-lg);
      padding: var(--space-lg);
      margin-bottom: var(--space-lg);
      border: 1px solid rgba(0, 0, 0, 0.05);
    }

    .tracker-item h3 {
      margin-bottom: var(--space-md);
      color: var(--text-primary);
      font-size: 1.1rem;
    }

    .stars {
      display: flex;
      gap: var(--space-sm);
      font-size: 1.5rem;
      cursor: pointer;
    }

    .star {
      color: #e5e7eb;
      transition: all 0.2s ease;
    }

    .star.filled {
      color: #fbbf24;
      animation: starGlow 0.3s ease;
    }

    @keyframes starGlow {
      0% { transform: scale(1); }
      50% { transform: scale(1.2); }
      100% { transform: scale(1); }
    }

    /* Quiz Tools Section */
    .quiz-tools-section {
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(20px);
      border-radius: var(--radius-xl);
      padding: var(--space-2xl);
      margin: var(--space-2xl) auto;
      box-shadow: var(--shadow-lg);
      border: 1px solid rgba(255, 255, 255, 0.2);
    }

    .section-title {
      font-size: 1.8rem;
      font-weight: 700;
      text-align: center;
      margin-bottom: var(--space-xl);
      background: var(--primary-gradient);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .quiz-tab-container {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: var(--space-xl);
      margin-bottom: var(--space-lg);
    }

    .quiz-tab-card {
      background: linear-gradient(135deg, #1e293b 0%, #334155 100%);
      border-radius: var(--radius-lg);
      padding: var(--space-xl);
      text-decoration: none;
      color: white;
      min-height: 180px;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      box-shadow: var(--shadow-lg);
      position: relative;
      overflow: hidden;
    }

    .quiz-tab-quiz {
      background: linear-gradient(135deg, #0b2e8a 0%, #1e40af 100%);
    }

    .quiz-tab-terms {
      background: linear-gradient(135deg, #4b0082 0%, #7c3aed 100%);
    }

    .quiz-tab-card:hover {
      transform: translateY(-8px);
      box-shadow: var(--shadow-xl);
    }

    .tools-coming-banner {
      text-align: center;
      color: var(--text-tertiary);
      font-style: italic;
      margin-top: var(--space-lg);
    }

    .tools-suggest-link {
      text-align: center;
      margin-top: var(--space-md);
    }

    .tools-suggest-link a {
      color: var(--accent-blue);
      text-decoration: none;
      font-weight: 600;
      padding: var(--space-sm) var(--space-lg);
      border-radius: var(--radius-md);
      border: 2px solid var(--accent-blue);
      transition: all 0.2s ease;
      display: inline-block;
    }

    .tools-suggest-link a:hover {
      background: var(--accent-blue);
      color: white;
    }

    /* Refresh Button */
    #refreshBtn {
      position: fixed;
      bottom: var(--space-xl);
      right: var(--space-xl);
      z-index: 9999;
      background: var(--primary-gradient);
      color: white;
      border: none;
      border-radius: 50%;
      width: 56px;
      height: 56px;
      font-size: 1.5rem;
      cursor: pointer;
      box-shadow: var(--shadow-xl);
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      display: flex;
      align-items: center;
      justify-content: center;
    }

    #refreshBtn:hover {
      transform: scale(1.1) rotate(180deg);
      box-shadow: 0 20px 40px rgba(102, 126, 234, 0.4);
    }

    #shockwave {
      position: fixed;
      bottom: calc(var(--space-xl) + 6px);
      right: calc(var(--space-xl) + 6px);
      width: 44px;
      height: 44px;
      border-radius: 50%;
      background: rgba(102, 126, 234, 0.3);
      opacity: 0;
      z-index: 9998;
      pointer-events: none;
    }

    /* Install App Button */
    #installApp {
      position: fixed;
      bottom: calc(var(--space-xl) + 70px);
      right: var(--space-xl);
      padding: var(--space-sm) var(--space-lg);
      background: var(--success-gradient);
      color: white;
      border: none;
      border-radius: var(--radius-lg);
      font-weight: 600;
      box-shadow: var(--shadow-lg);
      z-index: 999;
      transition: all 0.3s ease;
      cursor: pointer;
    }

    #installApp:hover {
      transform: translateY(-2px);
      box-shadow: var(--shadow-xl);
    }

    /* Toast Notification */
    #toast {
      background: linear-gradient(135deg, #1e293b 0%, #334155 100%);
      color: white;
      border-radius: var(--radius-lg);
      padding: var(--space-lg);
      box-shadow: var(--shadow-xl);
      border: 1px solid rgba(255, 255, 255, 0.1);
    }

    /* Ripple Effect */
    #rippleEffect {
      background: var(--primary-gradient);
      height: 3px;
    }

    /* Footer */
    footer {
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(20px);
      border-top: 1px solid rgba(0, 0, 0, 0.05);
      text-align: center;
      padding: var(--space-2xl);
      margin-top: var(--space-2xl);
      color: var(--text-secondary);
    }

    footer a {
      color: var(--accent-blue);
      text-decoration: none;
      font-weight: 500;
      transition: color 0.2s ease;
    }

    footer a:hover {
      color: var(--accent-purple);
    }

    /* Responsive Design */
    @media (max-width: 768px) {
      main {
        padding: var(--space-md);
      }

      .welcome-msg {
        padding: var(--space-lg);
      }

      .welcome-msg h1 {
        font-size: 1.5rem;
      }

      ul {
        grid-template-columns: 1fr;
      }

      .custom-tab-container {
        grid-template-columns: 1fr;
        gap: var(--space-lg);
      }

      .quiz-tab-container {
        grid-template-columns: 1fr;
      }

      #topBar {
        padding: var(--space-md);
      }

      #topBar h1 {
        font-size: 1.2rem;
      }

      section {
        padding: var(--space-lg);
      }

      section h2 {
        font-size: 1.3rem;
      }

      #refreshBtn {
        bottom: var(--space-md);
        right: var(--space-md);
        width: 48px;
        height: 48px;
        font-size: 1.2rem;
      }

      #installApp {
        bottom: calc(var(--space-md) + 60px);
        right: var(--space-md);
        padding: var(--space-xs) var(--space-md);
        font-size: 0.9rem;
      }
    }

    /* Dark mode support */
    @media (prefers-color-scheme: dark) {
      :root {
        --bg-primary: #0f172a;
        --bg-secondary: #1e293b;
        --bg-tertiary: #334155;
        --text-primary: #f8fafc;
        --text-secondary: #cbd5e1;
        --text-tertiary: #64748b;
      }
    }

    /* Loading Animation */
    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translateY(30px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .animate-fade-in {
      animation: fadeInUp 0.6s ease-out;
    }

    /* Smooth scrolling */
    html {
      scroll-behavior: smooth;
    }

    /* Focus styles for accessibility */
    *:focus {
      outline: 2px solid var(--accent-blue);
      outline-offset: 2px;
    }

    /* Selection color */
    ::selection {
      background: rgba(102, 126, 234, 0.3);
      color: var(--text-primary);
    }
  </style>
</head>

<script>
  if ('serviceWorker' in navigator) {
    window.addEventListener('load', () => {
      navigator.serviceWorker.register('service-worker.js')
        .then(reg => console.log('✅ Service Worker registered:', reg.scope))
        .catch(err => console.log('❌ Service Worker registration failed:', err));
    });
  }
</script>
   
  <!-- 🔄 Refresh Button -->
<button id="refreshBtn" title="Refresh">🔄</button>
<div id="shockwave"></div>

<body>
  <!-- ✅ Ripple Effect Line -->
<div id="rippleEffect" style="position: fixed; top: 0; left: 0; width: 100%; height: 4px; background: linear-gradient(to right, #667eea, #764ba2); opacity: 0; transition: opacity 0.4s; z-index: 999;"></div>

  <!-- 👤 Top Bar with Profile -->
  <div id="topBar">
    <h1>MY PROFILE</h1>
    <button id="profileBtn">
      👤
    </button>
  </div>

  <!-- 👤 Profile Dropdown Panel -->
  <div id="profileModal" style="display: none;">
    <p><strong>Name:</strong> <span id="modalName">Loading...</span></p>
    <p><strong>Email:</strong> <span id="modalEmail">Loading...</span></p>
    <hr style="margin: 1rem 0; border: none; height: 1px; background: #e5e7eb;">
    <button onclick="deleteAccount()">Delete Account</button>
    <button onclick="logout()">Logout</button>
  </div>

  <!-- ⚠️ Delete Confirm Modal -->
  <div id="confirmModal" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.6); justify-content:center; align-items:center; z-index:2000;">
    <div style="background:white; padding:2rem; border-radius:var(--radius-lg); max-width:300px; box-shadow: var(--shadow-xl);">
      <h3 style="color:#ef4444; margin-bottom: 1rem;">Confirm Delete</h3>
      <p style="margin-bottom: 1.5rem;">Are you sure you want to delete this account?</p>
      <div style="display: flex; gap: 1rem;">
        <button id="confirmYes" style="background:#ef4444; color:white; flex: 1; padding: 0.5rem;">Yes</button>
        <button id="confirmNo" style="background:#e5e7eb; color:#374151; flex: 1; padding: 0.5rem;">Cancel</button>
      </div>
    </div>
  </div>

  <!-- 🔊 Notification Sound -->
<audio id="notifySound" src="notify.mp3" preload="auto"></audio>

  <header>
    <h1>WELCOME TO HEARTIQUE NURSING NEXUS PORTAL❤️</h1>
  </header>

  <main class="animate-fade-in">
    <div class="welcome-msg">
      <h1 id="greeting">Welcome!</h1>
      <p id="welcomeUser">Welcome! We're glad to have you on the Heartique Nursing Nexus Alliance Portal👋</p>
      <p>This is <strong>Heartique Nursing Nexus Alliance Portal</strong> a dedicated space for all nursing students in kenya. Whether you're just beginning your journey or already progressing in your nursing career, this portal is here to support you every step of the way.</p>
      <p>More than just a resource hub, this is a community where students and professionals come together to grow, support one another, and inspire meaningful change through care and compassion.</p>
      <p>With its simple and organized layout, the portal offers quick access to PTS notes, Block 1–6 materials, revision papers, and co-curricular updates all in one convenient place. No more hassle searching for content; everything you need is just a tap away.</p>
      <p>Use this platform to stay organized, focused, and ahead in your studies. Let's grow together and become the difference the world needs.</p>
      <p>Stay in the loop and never miss a new feature; <strong>Join our WhatsApp channel for quick updates and special tips just for you!</strong></p>
      <div class="contact">
        📧 Contact: <a href="mailto:nursingnexusalliance@gmail.com">nursingnexusalliance@gmail.com</a><br>
        📞 Phone: <a href="tel:+254717517371">+254 717 517 371</a><br>
        💬 Stay updated always: <a href="https://whatsapp.com/channel/0029VbBFzgAEawdkJKtRtF2H" target="_blank">Follow our WhatsApp Channel –Heartique Nursing Nexus Alliance HQ</a><br>
        💬 Be part of the movement: <a href="https://chat.whatsapp.com/Lad2s4XXx1AA1TtThbMgWV" target="_blank">Join our WhatsApp Study Group – Heartique Nursing Nexus Alliance</a>
      </div>
    </div>

    <input type="text" id="searchBar" placeholder="🔍 Search notes, papers, and activities..." />

    <!-- 📢 Noticeboard -->
    <div id="noticeboard">
      <h3>📢 Noticeboard <span id="newBadge" style="color: #fbbf24; font-size: 0.9em; display: none;">(New)</span></h3>
      <button id="toggleNotice">Show Notices</button>
      <ul id="notices" style="margin: 0; padding-left: 20px; color: white; display: none; transition: all 0.5s ease-in-out; max-height: 0; overflow: hidden;"></ul>
    </div>

    <!-- 📱 Toast Notification -->
    <div id="toast" style="visibility: hidden; min-width: 250px; text-align: center; position: fixed; z-index: 1; left: 50%; bottom: 30px; transform: translateX(-50%); font-size: 16px;"></div>

    <section>
      <h2>📚 PTS & Block Notes</h2>
      <ul id="notesList">
        <li onclick="location.href='pts.html'">📝 PTS Revision Notes</li>
        <li onclick="location.href='block1.html'">📖 Block 1 Notes</li>
        <li onclick="location.href='block2.html'">📖 Block 2 Notes</li>
        <li onclick="location.href='block3.html'">📖 Block 3 Notes</li>
        <li onclick="location.href='block4.html'">📖 Block 4 Notes</li>
        <li onclick="location.href='block5.html'">📖 Block 5 Notes</li>
        <li onclick="location.href='block6.html'">📖 Block 6 Notes</li>
      </ul> 

      <div class="custom-tab-container">
        <a href="vocabulary.html" class="custom-tab-card custom-tab-vocab">
          <div class="tab-icon">📘</div>
          <div class="tab-content">
            <h2>NURSE WHISPERS</h2>
            <p>Most-used nursing & medical terms all in one place.</p>
            <span id="vocab-count" class="badge">Loading...</span>
          </div>
        </a>

        <a href="medicalabbreviations.html" class="custom-tab-card custom-tab-abbrev">
          <div class="tab-icon">⚕️</div>
          <div class="tab-content">
            <h2>MED ABBREVIATIONS</h2>
            <p>Quick access to essential medical abbreviations every nurse must know.</p>
            <span id="abbrev-count" class="badge">Loading...</span>
          </div>
        </a>
      </div>
    </section>

    <section>
      <h2>🎯 Core Objectives for Nursing Students</h2>
      <ul id="objectivesList">
        <li class="main-objective-tab" onclick="location.href='objectives.html'">📘 Nursing Study Objectives</li>
      </ul>
    </section>

    <section>
      <h2>📚 Very Important Books & Materials</h2>
      <ul id="vipBooksList">
        <li class="main-vip-books" onclick="location.href='essentials.html'">📘 Core Nursing Essentials</li>
        <li class="main-vip-books" onclick="location.href='pharmacology-book.html'">💊 Pharmacology Master Guide</li>
        <li class="main-vip-books" onclick="location.href='anatomy-diagrams.html'">🧠 Anatomy & Physiology Diagrams</li>
        <li class="main-vip-books" onclick="location.href='clinical-manual.html'">🩺 Clinical Procedures Manual</li>
        <li class="main-vip-books" onclick="location.href='exam-secrets.html'">🔐 NCK Exam Secrets & Hacks</li>
      </ul>
    </section>

    <section>
      <h2>📄 Past Revision Papers</h2>
      <ul id="pastPapersList">
        <li onclick="location.href='pts-revision.html'">📚 PTS Revision Portal</li>
        <li onclick="location.href='block1-revision.html'">📚 Block 1 Revision Portal</li>
        <li onclick="location.href='block2-revision.html'">📚 Block 2 Revision Portal</li>
        <li onclick="location.href='block3-revision.html'">📚 Block 3 Revision Portal</li>
        <li onclick="location.href='block4-revision.html'">📚 Block 4 Revision Portal</li>
        <li onclick="location.href='block5-revision.html'">📚 Block 5 Revision Portal</li>
        <li onclick="location.href='block6-revision.html'">📚 Block 6 Revision Portal</li>
        <li class="main-FQE-paper" onclick="location.href='FQE1.html'">✨ <strong>FQE Paper 1 Revision Papers</strong></li>
        <li class="main-FQE-paper" onclick="location.href='FQE2.html'">✨ <strong>FQE Paper 2 Revision Papers</strong></li>
        <li class="main-nck-paper" onclick="location.href='nck-paper1.html'">✨ <strong>NCK Paper 1 Revision Papers</strong></li>
        <li class="main-nck-paper" onclick="location.href='nck-paper2.html'">✨ <strong>NCK Paper 2 Revision Papers</strong></li>
      </ul>
    </section>

    <section class="quiz-tools-section">
      <h2 class="section-title">🧠 Study Tools Zone</h2>

      <div class="quiz-tab-container">
        <!-- Quiz Tab -->
        <a href="quiz.html" class="quiz-tab-card quiz-tab-quiz">
          <div class="tab-icon">📝</div>
          <div class="tab-content">
            <h2>HEARTIQUE QUIZZES APP🫡</h2>
            <p>Test your knowledge with instant feedback & scores.</p>
          </div>
        </a>

        <!-- Terms Tab -->
        <a href="terms.html" class="quiz-tab-card quiz-tab-terms">
          <div class="tab-icon">📘</div>
          <div class="tab-content">
            <h2>Terms & Tricks</h2>
            <p>Explore essential medical terms and smart nursing tricks, explained simply.</p>
          </div>
        </a>

        <!-- Image Study Tab -->
        <a href="imagestudys.html" class="quiz-tab-card quiz-tab-terms">
          <div class="tab-icon">🖼️</div>
          <div class="tab-content">
            <h2>MEDICAL CONCEPT GALLERY</h2>
            <p>Visualize key nursing & medical units with clean image tabs.</p>
          </div>
        </a>
      </div>

      <div class="tools-coming-banner">💡 More tools coming soon...</div>
      <div class="tools-suggest-link">
        <a href="https://wa.me/254717517371?text=Hi!%20I'd%20love%20to%20suggest%20a%20feature%20for%20Heartique..." target="_blank">
          + Suggest a feature
        </a>
      </div>
    </section>

    <section>
      <h2>🏃‍♂️ Co-curricular Activities</h2>
      <ul id="activitiesList">
        <li onclick="location.href='football.html'">⚽ Football</li>
        <li onclick="location.href='athletics.html'">🏃‍♀️ Athletics</li>
        <li onclick="location.href='volleyball.html'">🏐 Volleyball</li>
        <li onclick="location.href='basketball.html'">🏀 Basketball</li>
        <li onclick="location.href='chess.html'">♟️ Chess</li>
      </ul>
    </section>

    <section id="understandingTracker">
      <h2>⭐ Understanding Tracker</h2>
      <p style="text-align: center; margin-bottom: 30px; color: var(--text-secondary);">Rate your understanding of each topic or block below:</p>

      <div class="tracker-item">
        <h3>PTS (Professional Training Skills)</h3>
        <div class="stars" data-topic="PTS"></div>
      </div>

      <div class="tracker-item">
        <h3>Block 1</h3>
        <div class="stars" data-topic="Block 1"></div>
      </div>

      <div class="tracker-item">
        <h3>Block 2</h3>
        <div class="stars" data-topic="Block 2"></div>
      </div>

      <div class="tracker-item">
        <h3>Block 3</h3>
        <div class="stars" data-topic="Block 3"></div>
      </div>

      <div class="tracker-item">
        <h3>Block 4</h3>
        <div class="stars" data-topic="Block 4"></div>
      </div>

      <div class="tracker-item">
        <h3>Block 5</h3>
        <div class="stars" data-topic="Block 5"></div>
      </div>
    </section>

    <!-- Install App Button -->
    <button id="installApp" style="display:none;">
      📲 Install Portal
    </button>
  </main>

  <footer>
    <p>&copy; 2025 Heartique Nursing. All rights reserved. |
      <a href="about.html">About</a> |
      <a href="contact.html">Contact</a> |
      <a href="privacy.html">Privacy Policy</a>
    </p>
  </footer>

  <!-- Scripts (keeping all existing functionality) -->
  <script>
    const topics = document.querySelectorAll(".stars");

    topics.forEach(starBlock => {
      const topicKey = starBlock.getAttribute("data-topic");
      const savedRating = localStorage.getItem("rating-" + topicKey) || 0;

      for (let i = 1; i <= 5; i++) {
        const star = document.createElement("span");
        star.classList.add("star");
        star.innerHTML = "★";
        if (i <= savedRating) star.classList.add("filled");

        star.addEventListener("click", () => {
          localStorage.setItem("rating-" + topicKey, i);
          updateStars(starBlock, i);
        });

        starBlock.appendChild(star);
      }
    });

    function updateStars(container, rating) {
      const stars = container.querySelectorAll(".star");
      stars.forEach((star, idx) => {
        star.classList.toggle("filled", idx < rating);
      });
    }
  </script>

  <!-- Install App Script -->
  <script>
    let deferredPrompt;
    const installButton = document.getElementById('installApp');

    // Check if already installed (standalone mode)
    const isStandalone = window.matchMedia('(display-mode: standalone)').matches || window.navigator.standalone;
    if (!isStandalone) {
      window.addEventListener('beforeinstallprompt', (e) => {
        e.preventDefault();
        deferredPrompt = e;
        installButton.style.display = 'block';

        installButton.addEventListener('click', () => {
          installButton.style.display = 'none';
          deferredPrompt.prompt();

          deferredPrompt.userChoice.then((choiceResult) => {
            if (choiceResult.outcome === 'accepted') {
              console.log('✅ App installed');
            } else {
              console.log('❌ App installation dismissed');
              setTimeout(() => {
                if (deferredPrompt) {
                  installButton.style.display = 'block';
                }
              }, 30000);
            }
            deferredPrompt = null;
          });
        });
      });
    } else {
      console.log('📱 App already installed');
    }
  </script>

  <script>
    const searchInput = document.getElementById("searchBar");

    // Create a 'no results' message and hide it initially
    const noResultsMessage = document.createElement("p");
    noResultsMessage.id = "noResultsMessage";
    noResultsMessage.textContent = "🔍 No matching content found.";
    noResultsMessage.style.textAlign = "center";
    noResultsMessage.style.color = "#ef4444";
    noResultsMessage.style.fontWeight = "bold";
    noResultsMessage.style.display = "none";
    searchInput.insertAdjacentElement("afterend", noResultsMessage);

    searchInput.addEventListener("input", function () {
      const query = this.value.toLowerCase();
      const allLists = document.querySelectorAll("ul");
      let totalVisible = 0;

      allLists.forEach((list) => {
        const items = list.querySelectorAll("li");

        items.forEach((item) => {
          const text = item.textContent.toLowerCase();
          const match = text.includes(query);
          item.style.display = match ? "block" : "none";
          if (match) totalVisible++;
        });
      });

      // Show or hide the no results message
      noResultsMessage.style.display = totalVisible === 0 ? "block" : "none";
    });
  </script>

  <script>
    fetch('vocabulary.json')
      .then(res => res.json())
      .then(data => {
        const count = data.length;
        document.getElementById("vocab-count").innerText = `${count} words inside`;
      })
      .catch(() => {
        document.getElementById("vocab-count").innerText = `Vocabulary`;
      });
  </script>  

  <script>
    fetch('abbreviations.json')
      .then(res => res.json())
      .then(data => {
        const count = data.length;
        document.getElementById("abbrev-count").innerText = `${count} terms inside`;
      })
      .catch(() => {
        document.getElementById("abbrev-count").innerText = `Abbreviations`;
      });
  </script>

  <!-- ✅ Supabase + Profile Logic (No Refresh) -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js"></script>
  <script>
    const supabase = window.supabase.createClient(
      'https://fczslywprowqzgwcwhzu.supabase.co',
      'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZjenNseXdwcm93cXpnd2N3aHp1Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTE4MzU1MDEsImV4cCI6MjA2NzQxMTUwMX0.IWQ1kwEPRrigvYurWRbuHQWRrHZU9K-3bbYgdH745zk' // replace with actual anon key
    );

    const profileBtn = document.getElementById('profileBtn');
    const profileModal = document.getElementById('profileModal');
    const rippleEffect = document.getElementById('rippleEffect');

    function triggerRippleEffect() {
      if (!rippleEffect) return;
      rippleEffect.style.opacity = '1';
      setTimeout(() => {
        rippleEffect.style.opacity = '0';
      }, 400);
    }

    supabase.auth.onAuthStateChange((event, session) => {
      if (session) {
        localStorage.setItem('supabaseSession', JSON.stringify(session));
      } else {
        localStorage.removeItem('supabaseSession');
      }
    });

    function isSessionExpired(session) {
      const now = Math.floor(Date.now() / 1000);
      return session.expires_at && session.expires_at < now;
    }

    async function loadUser() {
      const greetingEl = document.getElementById('greeting');
      const welcomeUser = document.getElementById('welcomeUser');
      const modalName = document.getElementById('modalName');
      const modalEmail = document.getElementById('modalEmail');

      let sessionData = localStorage.getItem('supabaseSession');
      let session = sessionData ? JSON.parse(sessionData) : null;

      if (!session || isSessionExpired(session)) {
        const { data } = await supabase.auth.getSession();
        session = data?.session;
        if (session) {
          localStorage.setItem('supabaseSession', JSON.stringify(session));
        } else {
          return window.location.href = 'login.html';
        }
      }

      const userId = session.user.id;
      const userEmail = session.user.email;
      let fullName = localStorage.getItem('full_name');

      if (!fullName) {
        const { data: userData, error } = await supabase
          .from('user')
          .select('full_name')
          .eq('id', userId)
          .single();

        if (!error && userData?.full_name) {
          fullName = userData.full_name;
          localStorage.setItem('full_name', fullName);
        }
      }

      if (fullName) {
        if (greetingEl) greetingEl.textContent = `Welcome, ${fullName}!`;
        if (welcomeUser) welcomeUser.textContent = `Hello ${fullName}, we're glad to have you on the Nursing Nexus Portal 👋`;
        if (modalName) modalName.textContent = fullName;
      }

      if (modalEmail) modalEmail.textContent = userEmail;

      document.getElementById('loading')?.style.setProperty('display', 'none');
      document.getElementById('app')?.style.setProperty('display', 'block');
    }

    setTimeout(loadUser, 50);

    async function logout() {
      const confirmed = confirm("Are you sure you want to log out?");
      if (!confirmed) return;

      await supabase.auth.signOut();
      localStorage.removeItem('supabaseSession');
      window.location.href = 'login.html';
    }

    // ❌ Delete Account with confirmation modal
    function showConfirmModal(callback) {
      const modal = document.getElementById('confirmModal');
      modal.style.display = 'flex';

      const yesBtn = document.getElementById('confirmYes');
      const noBtn = document.getElementById('confirmNo');

      const cleanup = () => {
        modal.style.display = 'none';
        yesBtn.removeEventListener('click', onConfirm);
        noBtn.removeEventListener('click', onCancel);
      };

      const onConfirm = () => {
        cleanup();
        callback(true);
      };

      const onCancel = () => {
        cleanup();
        callback(false);
      };

      yesBtn.addEventListener('click', onConfirm);
      noBtn.addEventListener('click', onCancel);
    }

    async function deleteAccount() {
      triggerRippleEffect();

      showConfirmModal(async (confirmed) => {
        if (!confirmed) return alert("Account deletion cancelled.");

        const { data: { user } } = await supabase.auth.getUser();
        if (!user) return alert("You're not logged in.");

        const { error } = await supabase.from('user').delete().eq('id', user.id);
        if (error) return alert("❌ Error deleting user.");

        alert("✅ Account deleted. Logging out...");
        await supabase.auth.signOut();
        localStorage.clear();
        window.location.href = 'login.html';
      });
    }

    // 🧑 Profile Modal Toggle
    profileBtn?.addEventListener('click', (e) => {
      profileModal.style.display = profileModal.style.display === 'block' ? 'none' : 'block';
      triggerRippleEffect();
      e.stopPropagation();
    });

    // ⛔ Close modal on outside click
    document.addEventListener('click', (e) => {
      if (!profileModal.contains(e.target) && e.target !== profileBtn) {
        profileModal.style.display = 'none';
      }
    });
  </script>

  <script>
    const noticeList = document.getElementById('notices');
    const toggleBtn = document.getElementById('toggleNotice');
    const toast = document.getElementById("toast");
    const badge = document.getElementById('newBadge');
    const notifySound = document.getElementById('notifySound');

    toggleBtn.addEventListener('click', () => {
      noticeList.classList.toggle('show');
      toggleBtn.textContent = noticeList.classList.contains('show') ? 'Hide Notices' : 'Show Notices';
      if (noticeList.classList.contains('show')) {
        noticeList.style.maxHeight = "1000px";
        noticeList.style.display = "block";
        badge.style.display = "none";
        // When user reads, mark as seen
        const allIDs = Array.from(noticeList.querySelectorAll('li')).map(li => li.dataset.id);
        localStorage.setItem('seenNotices', JSON.stringify(allIDs));
      } else {
        noticeList.style.maxHeight = "0";
        setTimeout(() => { noticeList.style.display = "none"; }, 400);
      }
    });

    function playSound() {
      notifySound.play().catch(() => {
        document.body.addEventListener('click', () => notifySound.play(), { once: true });
      });
    }

    function showToast(msg) {
      toast.textContent = msg;
      toast.style.visibility = "visible";
      toast.className = "show";
      setTimeout(() => {
        toast.style.visibility = "hidden";
        toast.className = toast.className.replace("show", "");
      }, 3000);
    }

    function fetchNotices() {
      fetch('notices.json?nocache=' + Date.now())
        .then(res => res.json())
        .then(data => {
          const seen = JSON.parse(localStorage.getItem('seenNotices') || '[]');
          const newOnes = [];

          noticeList.innerHTML = "";
          data.forEach(item => {
            const li = document.createElement('li');
            li.innerHTML = `<strong>${item.date}:</strong> ${item.message}`;
            li.dataset.id = item.id;
            noticeList.appendChild(li);

            if (!seen.includes(item.id)) {
              newOnes.push(item.id);
            }
          });

          if (newOnes.length > 0) {
            badge.style.display = 'inline';
            playSound();
            showToast("HEY, 📢 New notice available! KINDLY CHECK THE NOTICE TAB AT THE TOP TO STOP THE NOTIFICATION SOUND AND POP UP.");
          }

          if (noticeList.classList.contains('show')) {
            localStorage.setItem('seenNotices', JSON.stringify(data.map(n => n.id)));
            badge.style.display = "none";
          }
        })
        .catch(err => {
          console.error("Notice loading error:", err);
          noticeList.innerHTML = "<li>Failed to load notices.</li>";
        });
    }

    fetchNotices();
    setInterval(fetchNotices, 10000); // repeat every 10 sec
  </script>

  <script>
    const refreshBtn = document.getElementById('refreshBtn');
    const shockwave = document.getElementById('shockwave');

    refreshBtn.addEventListener('click', () => {
      // Reset shockwave
      shockwave.style.transition = 'none';
      shockwave.style.opacity = '1';
      shockwave.style.transform = 'scale(1)';
      
      // Force reflow
      void shockwave.offsetWidth;

      // Trigger animation
      shockwave.style.transition = 'transform 0.6s ease-out, opacity 0.6s ease-out';
      shockwave.style.transform = 'scale(8)';
      shockwave.style.opacity = '0';

      // Then refresh after short delay
      setTimeout(() => {
        location.reload(true); // force full reload
      }, 500);
    });
  </script>

</body>
</html>
