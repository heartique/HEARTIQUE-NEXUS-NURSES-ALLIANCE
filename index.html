<!DOCTYPE html>
<html lang="en">
<head>
  <script>
    const savedTheme = localStorage.getItem("theme");
    const prefersDark = window.matchMedia("(prefers-color-scheme: dark)").matches;
    const theme = savedTheme || (prefersDark ? "dark" : "light");
    document.documentElement.setAttribute("data-theme", theme);
  </script>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Heartique Nexus Dashboard</title>
 <link rel="icon" type="image/jpeg" href="https://raw.githubusercontent.com/heartique/HEARTIQUE-NEXUS-NURSES-ALLIANCE/main/icon-192.jpg">
  <link rel="manifest" href="manifest.json" />
<meta name="theme-color" content="#004a99" />
<button onclick="deleteAccount()">üóëÔ∏è Delete My Account</button>

  <style>
    body {
     font-family: Arial, sans-serif;
  background-image: url('https://raw.githubusercontent.com/heartique/HEARTIQUE-NEXUS-NURSES-ALLIANCE/main/background4.jpg');
  background-size: cover;
  background-repeat: no-repeat;
  background-position: center;
  margin: 0;
  padding: 0;
  color: #333;
    }
    header {
      background: #004a99;
      color: white;
      padding: 1rem 1.5rem;
      text-align: center;
      position: relative;
    }
    <img src="https://github.com/heartique/HEARTIQUE-NEXUS-NURSES-ALLIANCE/blob/main/floating1.svg" 
     id="floatingNurse" 
     alt="Student Nurse" />
    header h1 {
      margin: 0;
      font-weight: 700;
    }
    #logoutBtn {
      position: absolute;
      top: 1rem;
      right: 1.5rem;
      background: #e53935;
      color: white;
      border: none;
      padding: 0.4rem 1rem;
      border-radius: 4px;
      cursor: pointer;
      font-weight: 600;
    }
    main {
      max-width: 1000px;
      margin: 1rem auto;
      padding: 1rem;
    }
    .welcome-msg {
      background: #e8f0fe;
      border-left: 6px solid #004a99;
      padding: 1rem;
      margin-bottom: 1rem;
      border-radius: 4px;
    }
    .welcome-msg p {
      font-size: 1.1rem;
    }
    .contact {
      font-size: 0.9rem;
      margin-top: 0.5rem;
      color: #555;
    }
    #searchBar {
      width: 100%;
      padding: 0.7rem 1rem;
      font-size: 1rem;
      margin-bottom: 1rem;
      border: 2px solid #004a99;
      border-radius: 4px;
      box-sizing: border-box;
    }
    section {
      background: white;
      padding: 1rem 1.5rem;
      margin-bottom: 1rem;
      border-radius: 6px;
      box-shadow: 0 1px 5px rgba(0,0,0,0.1);
    }
    section h2 {
      margin-top: 0;
      color: #004a99;
    }
    ul {
      list-style: none;
      padding-left: 0;
      display: flex;
      flex-wrap: wrap;
      gap: 0.5rem;
    }
    ul li {
      padding: 0.7rem 1rem;
      background: #e3e8ff;
      border-radius: 6px;
      cursor: pointer;
      flex: 1 1 calc(33.333% - 1rem);
      text-align: center;
      box-shadow: inset 0 0 5px rgba(0,0,0,0.1);
      transition: background 0.2s ease;
    }
    ul li:hover {
      background-color: #d6e0ff;
    }
    .tracker {
      display: flex;
      gap: 1rem;
      flex-wrap: wrap;
    }
    .tracker-item {
      flex: 1 1 120px;
      background: #e3e8ff;
      border-radius: 6px;
      padding: 0.7rem;
      text-align: center;
      cursor: pointer;
      user-select: none;
      box-shadow: inset 0 0 5px rgba(0,0,0,0.1);
    }
    .tracker-item.strong {
      background: #d4f5d4;
      border: 2px solid #4caf50;
      color: #2e7d32;
    }
    .tracker-item.fair {
      background: #fff7d1;
      border: 2px solid #fbc02d;
      color: #f57f17;
    }
    .tracker-item.weak {
      background: #ffd6d6;
      border: 2px solid #e53935;
      color: #b71c1c;
    }
    .tracker-item:hover {
      opacity: 0.8;
    }
    footer {
      text-align: center;
      font-size: 0.9rem;
      padding: 1rem;
      color: #666;
    }
    @media (max-width: 600px) {
      .main-nck-paper {
  background: linear-gradient(135deg, #ff9800, #f44336);
  color: #fff;
  font-weight: 900;
  font-size: 1.4rem;
  border-radius: 18px;
  border: 4px solid #ff5722;
  box-shadow: 0 0 20px rgba(255, 87, 34, 0.4);
  text-align: center;
  flex: 1 1 100%;
  padding: 2rem 1rem;
    margin-top: 1rem;
  margin-bottom: 1rem;
  transition: all 0.3s ease; 
}
.main-nck-paper:hover {
  background: linear-gradient(135deg, #ff7043, #e53935);
  transform: scale(1.05);
  box-shadow: 0 0 25px rgba(255, 87, 34, 0.7);
}
      ul li {
        flex: 1 1 100%;
      }
      .tracker {
        flex-direction: column;
    }
}

    /* Tab container layout */
.custom-tab-container {
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  gap: 20px;
  padding: 20px;
  max-width: 1000px;
  margin: auto;
}

/* Compact tab cards */
.custom-tab-card {
  flex: 1 1 260px;
  max-width: 320px;
  display: block;
  border-radius: 14px;
  padding: 16px 18px;
  text-decoration: none;
  color: #fff;
  min-height: 160px;
  transition: transform 0.3s ease, box-shadow 0.3s ease;
  animation: slideIn 0.7s ease both;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
}

/* Hover effect */
.custom-tab-card:hover {
  transform: translateY(-6px);
  box-shadow: 0 12px 28px rgba(0, 0, 0, 0.3);
}

/* Strong background colors */
.custom-tab-vocab {
  background-color: #1d4ed8 !important; /* Royal Blue */
}

.custom-tab-abbrev {
  background-color: #dc2626 !important; /* Deep Red */
}

/* Inside content */
.tab-icon {
  font-size: 1.8rem;
  margin-bottom: 8px;
}

.tab-content h2 {
  margin: 0 0 4px;
  font-size: 1.2rem;
  font-weight: 600;
}

.tab-content p {
  margin: 0 0 8px;
  font-size: 0.88rem;
  font-weight: 400;
  line-height: 1.3;
}

.badge {
  background: rgba(255, 255, 255, 0.2);
  color: #fff;
  padding: 4px 10px;
  border-radius: 12px;
  font-size: 0.7rem;
  font-weight: 500;
}

/* Slide-in animation */
@keyframes slideIn {
  from {
    opacity: 0;
    transform: translateX(40px);
  }
  to {
    opacity: 1;
    transform: translateX(0);
  }
}

/* Mobile-friendly layout */
@media (max-width: 768px) {
  .custom-tab-container {
    flex-direction: column;
    align-items: center;
  }

  .custom-tab-card {
    width: 90%;
    max-width: 360px;
  }
}

  </style>
</head>
  <script>
  if ('serviceWorker' in navigator) {
    window.addEventListener('load', () => {
      navigator.serviceWorker.register('service-worker.js')
        .then(reg => console.log('‚úÖ Service Worker registered:', reg.scope))
        .catch(err => console.log('‚ùå Service Worker registration failed:', err));
    });
  }
</script>
<body>
  <!-- üîä Notification Sound -->
<audio id="notifySound" src="notify.mp3" preload="auto"></audio>
  <header>
    <h1>WELCOME TO HEARTIQUE NURSING NEXUS PORTAL‚ù§Ô∏è</h1>
  </header>
  <main>
    <div class="welcome-msg">
        <h1 id="greeting">Welcome!</h1>
<p id="welcomeUser">Hello! We're glad to have you on the Nursing Nexus Portal üëã</p>
<p>Welcome to the <strong>Heartique Nursing Nexus Alliance Portal</strong>a dedicated space for all students of Fidenza School of Nursing. Whether you're just beginning your journey or already progressing in your nursing career, this portal is here to support you every step of the way.</p>
<p>More than just a resource hub, this is a community where students and professionals come together to grow, support one another, and inspire meaningful change through care and compassion.</p>
<p>With its simple and organized layout, the portal offers quick access to PTS notes, Block 1‚Äì6 materials, revision papers, and co-curricular updates all in one convenient place. No more hassle searching for content; everything you need is just a tap away.</p>
<p>Use this platform to stay organized, focused, and ahead in your studies. Let‚Äôs grow together and become the difference the world needs.</p>
<p>Stay in the loop and never miss a new feature;  <strong>Join our WhatsApp channel for quick updates and special tips just for you!</strong></p>
<p class="contact">
  üìß Contact: <a href="mailto:nursingnexusalliance@gmail.com">nursingnexusalliance@gmail.com</a><br>
  üìû Phone: <a href="tel:+254717517371">+254 717 517 371</a><br>
  üí¨ Join our Community: <a href="https://whatsapp.com/channel/0029VbBFzgAEawdkJKtRtF2H" target="_blank">WhatsApp Channnel ‚Äì Nursing Nexus Alliance HQ</a>
</p>

<input type="text" id="searchBar" placeholder="Search notes, papers, and activities..." />
</p>
    <section>
    <!-- üì¢ Noticeboard -->
<div id="noticeboard" style="background-color: #fff8dc; border-left: 6px solid #ffa500; padding: 12px 20px; margin: 20px 0; font-family: Arial, sans-serif; border-radius: 8px; box-shadow: 0 2px 6px rgba(0,0,0,0.1);">
  <h3 style="margin-top: 0; color: #d2691e;">
    üì¢ Noticeboard <span id="newBadge" style="color: red; font-size: 0.9em; display: none;">(New)</span>
  </h3>
  <button id="toggleNotice">Show Notices</button>
  <ul id="notices" style="margin: 0; padding-left: 20px; color: #333; display: none; transition: all 0.5s ease-in-out; max-height: 0; overflow: hidden;"></ul>
</div>
<!-- üì± Toast Notification -->
<div id="toast" style="visibility: hidden; min-width: 250px; background-color: #333; color: #fff; text-align: center; border-radius: 8px; padding: 12px; position: fixed; z-index: 1; left: 50%; bottom: 30px; transform: translateX(-50%); font-size: 16px;"></div>

      <h2>PTS & Block Notes</h2>
      <ul id="notesList">
        <li onclick="location.href='pts.html'">PTS Revision Notes</li>
        <li onclick="location.href='block1.html'">Block 1 Notes</li>
        <li onclick="location.href='block2.html'">Block 2 Notes</li>
        <li onclick="location.href='block3.html'">Block 3 Notes</li>
        <li onclick="location.href='block4.html'">Block 4 Notes</li>
        <li onclick="location.href='block5.html'">Block 5 Notes</li>
        <li onclick="location.href='block6.html'">Block 6 Notes</li>
  </ul> 
<div class="custom-tab-container">
  <a href="vocabulary.html" class="custom-tab-card custom-tab-vocab">
    <div class="tab-icon">üìò</div>
    <div class="tab-content">
      <h2>NURSE WHISPERS</h2>
      <p>Most-used nursing & medical terms all in one place.</p>
      <span id="vocab-count" class="badge">Loading...</span>
    </div>
  </a>

  <a href="medicalabbreviations.html" class="custom-tab-card custom-tab-abbrev">
    <div class="tab-icon">‚öïÔ∏è</div>
    <div class="tab-content">
      <h2>MED ABBREVIATIONS</h2>
      <p>Quick access to essential medical abbreviations every nurse must know.</p>
      <span id="abbrev-count" class="badge">Loading...</span>
    </div>
  </a>
</div>
     <section>
  <h2>üéØ Core Objectives for Nursing Students</h2>
  <ul id="objectivesList">
    <li class="main-objective-tab" onclick="location.href='objectives.html'">üìò Nursing Study Objectives</li>
  </ul>
</section>
        <section>
  <h2>üìö Very Important Books & Materials</h2>
  <ul id="vipBooksList">
    <li class="main-vip-books" onclick="location.href='essentials.html'">üìò Core Nursing Essentials</li>
    <li class="main-vip-books" onclick="location.href='pharmacology-book.html'">üíä Pharmacology Master Guide</li>
    <li class="main-vip-books" onclick="location.href='anatomy-diagrams.html'">üß† Anatomy & Physiology Diagrams</li>
    <li class="main-vip-books" onclick="location.href='clinical-manual.html'">ü©∫ Clinical Procedures Manual</li>
    <li class="main-vip-books" onclick="location.href='exam-secrets.html'">üîê NCK Exam Secrets & Hacks</li>
  </ul>
</section>
      </ul>
    </section>

    <section>
      <h2>Past Revision Papers</h2>
      <ul id="pastPapersList">
        
        <li onclick="location.href='pts-revision.html'">üìö PTS Revision Portal</li>
       <li onclick="location.href='block1-revision.html'">üìö Block 1 Revision Portal</li>
        <li onclick="location.href='block2-revision.html'">üìö Block 2 Revision Portal</li>
       <li onclick="location.href='block3-revision.html'">üìö Block 3 Revision Portal</li>
      <li onclick="location.href='block4-revision.html'">üìö Block 4 Revision Portal</li>
        <li onclick="location.href='block5-revision.html'">üìö Block 5 Revision Portal</li>
        <li onclick="location.href='block6-revision.html'">üìö Block 6 Revision Portal</li>
  <li class="main-FQE-paper" onclick="location.href='FQE1.html'">‚ú® <strong> FQE Paper 1 Revision Papers</strong></li>
         <li class="main-FQE-paper" onclick="location.href='FQE2.html'">‚ú® <strong> FQE Paper 2 Revision Papers</strong></li>
         <li class="main-nck-paper" onclick="location.href='nck-paper1.html'">‚ú® <strong>NCK Paper 1 Revision Papers</strong></li>
  <li class="main-nck-paper" onclick="location.href='nck-paper2.html'">‚ú® <strong>NCK Paper 2 Revision Papers</strong></li>
        </ul>
      
</a>
    <div class="custom-tab-container">
  <!-- Quiz Tab -->
  <a href="quiz.html" class="custom-tab-card custom-tab-quiz">
    <div class="tab-icon">üìù</div>
    <div class="tab-content">
      <h2>HEARTIQUE QUIZZES APPü´°</h2>
      <p>Test your knowledge with instant feedback & scores.</p>
    </div>
  </a>

  <!-- Terms Tab -->
  <a href="terms.html" class="custom-tab-card custom-tab-terms">
    <div class="tab-icon">üìò</div>
    <div class="tab-content">
      <h2>Terms & Tricks</h2>
      <p>Explore essential medical terms and smart nursing tricks, explained simply.</p>
    </div>
  </a>
</div>

    </section>
    <section>
      <h2>Co-curricular Activities</h2>
      <ul id="activitiesList">
        <li onclick="location.href='football.html'">Football</li>
        <li onclick="location.href='athletics.html'">Athletics</li>
        <li onclick="location.href='volleyball.html'">Volleyball</li>
        <li onclick="location.href='basketball.html'">Basketball</li>

        <li onclick="location.href='chess.html'">Chess</li>
        
      </ul>
    </section>
  <section id="understandingTracker" style="margin: 40px auto; max-width: 800px; font-family: Arial, sans-serif;">
  <h2 style="text-align: center;">‚≠ê Understanding Tracker</h2>
  <p style="text-align: center; margin-bottom: 30px;">Rate your understanding of each topic or block below:</p>

  <div class="tracker-item">
    <h3>PTS (Professional Training Skills)</h3>
    <div class="stars" data-topic="PTS"></div>
  </div>

  <div class="tracker-item">
    <h3>Block 1</h3>
    <div class="stars" data-topic="Block 1"></div>
  </div>

  <div class="tracker-item">
    <h3>Block 2</h3>
    <div class="stars" data-topic="Block 2"></div>
  </div>

  <div class="tracker-item">
    <h3>Block 3</h3>
    <div class="stars" data-topic="Block 3"></div>
  </div>

  <div class="tracker-item">
    <h3>Block 4</h3>
    <div class="stars" data-topic="Block 4"></div>
  </div>

  <div class="tracker-item">
    <h3>Block 5</h3>
    <div class="stars" data-topic="Block 5"></div>
  </div>
</section>

<style>
  .main-vip-books {
  background: linear-gradient(135deg, #0d47a1, #1565c0);
  color: #fff;
  font-weight: 900;
  font-size: 1.1rem;
  border-radius: 16px;
  border: 3px solid #90caf9;
  box-shadow: 0 0 15px rgba(21, 101, 192, 0.4);
  text-align: center;
  flex: 1 1 100%;
  padding: 1.5rem 1rem;
  transition: all 0.3s ease;
}
.main-vip-books:hover {
  background: linear-gradient(135deg, #1976d2, #1e88e5);
  transform: scale(1.04);
  box-shadow: 0 0 20px rgba(21, 101, 192, 0.7);
}
  .main-objective-tab {
  background: linear-gradient(135deg, #4a148c, #880e4f);
  color: #fff;
  font-weight: 900;
  font-size: 1.4rem;
  border-radius: 18px;
  border: 4px solid #ce93d8;
  box-shadow: 0 0 20px rgba(136, 14, 79, 0.4);
  text-align: center;
  flex: 1 1 100%;
  padding: 2rem 1rem;
  margin-top: 1rem;
  margin-bottom: 1rem;
  transition: all 0.3s ease;
}

.main-objective-tab:hover {
  background: linear-gradient(135deg, #6a1b9a, #ad1457);
  transform: scale(1.05);
  box-shadow: 0 0 25px rgba(136, 14, 79, 0.7);
}

  .tracker-item {
         font-family: Arial, sans-serif;
  background-image:#f5f5f5
  margin: 0;
  padding: 0;
  color: #333;
  }

  .stars {
    font-size: 24px;
    display: flex;
    gap: 10px;
    cursor: pointer;
  }

  .star {
    color: #ccc;
    transition: color 0.2s ease;
  }
  .star.filled {
    color: #ffc107;
  }

  /* New color themes */
.custom-tab-quiz {
  background-color: #0f766e !important; /* Strong teal */
  color: #fff;
}

.custom-tab-terms {
  background-color: #7e57c2 !important; /* Deep violet */
  color: #fff;
}

/* Reuse existing styles for layout, hover, animation */
.custom-tab-card {
  flex: 1 1 260px;
  max-width: 320px;
  display: block;
  border-radius: 14px;
  padding: 20px;
  text-decoration: none;
  min-height: 160px;
  transition: transform 0.3s ease, box-shadow 0.3s ease;
  animation: slideIn 0.7s ease both;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
  .custom-tab-card h2,
.custom-tab-card p,
.custom-tab-card .tab-icon,
.custom-tab-card span {
  color: #ffffff !important;
}


.custom-tab-card:hover {
  transform: translateY(-6px);
  box-shadow: 0 12px 28px rgba(0, 0, 0, 0.3);
}

/* Text formatting */
.tab-icon {
  font-size: 1.8rem;
  margin-bottom: 8px;
}
.tab-content h2 {
  margin: 0 0 4px;
  font-size: 1.2rem;
  font-weight: 600;
}
.tab-content p {
  margin: 0;
  font-size: 0.88rem;
  font-weight: 400;
  line-height: 1.3;
}

/* Animation */
@keyframes slideIn {
  from {
    opacity: 0;
    transform: translateX(40px);
  }
  to {
    opacity: 1;
    transform: translateX(0);
  }
}

/* Container + responsive */
.custom-tab-container {
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  gap: 20px;
  padding: 20px;
  max-width: 1000px;
  margin: auto;
}

@media (max-width: 768px) {
  .custom-tab-container {
    flex-direction: column;
    align-items: center;
  }

  .custom-tab-card {
    width: 90%;
    max-width: 360px;
  }
}

  
</style>
<script>
  const topics = document.querySelectorAll(".stars");

  topics.forEach(starBlock => {
    const topicKey = starBlock.getAttribute("data-topic");
    const savedRating = localStorage.getItem("rating-" + topicKey) || 0;

    for (let i = 1; i <= 5; i++) {
      const star = document.createElement("span");
      star.classList.add("star");
      star.innerHTML = "‚òÖ";
      if (i <= savedRating) star.classList.add("filled");

      star.addEventListener("click", () => {
        localStorage.setItem("rating-" + topicKey, i);
        updateStars(starBlock, i);
      });

      starBlock.appendChild(star);
    }
  });

  function updateStars(container, rating) {
    const stars = container.querySelectorAll(".star");
    stars.forEach((star, idx) => {
      star.classList.toggle("filled", idx < rating);
    });
  }
  </script>
      <button id="installApp"
  style="display:none;position:fixed;bottom:20px;right:20px;padding:12px 18px;background:#004a99;color:white;border:none;border-radius:12px;font-weight:bold;box-shadow:0 4px 10px rgba(0,0,0,0.2);z-index:999;">
  üì≤ Install Portal
</button>

<script>
  let deferredPrompt;
  const installButton = document.getElementById('installApp');

  window.addEventListener('beforeinstallprompt', (e) => {
    e.preventDefault();
    deferredPrompt = e;
    installButton.style.display = 'block';

    installButton.addEventListener('click', () => {
      installButton.style.display = 'none';
      deferredPrompt.prompt();
      deferredPrompt.userChoice.then((choiceResult) => {
        if (choiceResult.outcome === 'accepted') {
          console.log('App installed');
        } else {
          console.log('App installation dismissed');
        }
        deferredPrompt = null;
      });
    });
  });
</script>
      <script>
  const searchInput = document.getElementById("searchBar");

  // Create a 'no results' message and hide it initially
  const noResultsMessage = document.createElement("p");
  noResultsMessage.id = "noResultsMessage";
  noResultsMessage.textContent = "üîç No matching content found.";
  noResultsMessage.style.textAlign = "center";
  noResultsMessage.style.color = "#b71c1c";
  noResultsMessage.style.fontWeight = "bold";
  noResultsMessage.style.display = "none";
  searchInput.insertAdjacentElement("afterend", noResultsMessage);

  searchInput.addEventListener("input", function () {
    const query = this.value.toLowerCase();
    const allLists = document.querySelectorAll("ul");
    let totalVisible = 0;

    allLists.forEach((list) => {
      const items = list.querySelectorAll("li");

      items.forEach((item) => {
        const text = item.textContent.toLowerCase();
        const match = text.includes(query);
        item.style.display = match ? "block" : "none";
        if (match) totalVisible++;
      });
    });

    // Show or hide the no results message
    noResultsMessage.style.display = totalVisible === 0 ? "block" : "none";
  });
</script>
      <script>
  fetch('vocabulary.json')
    .then(res => res.json())
    .then(data => {
      const count = data.length;
      document.getElementById("vocab-count").innerText = `${count} words inside`;
    })
    .catch(() => {
      document.getElementById("vocab-count").innerText = `Vocabulary`;
    });
</script>  

      <script>
  fetch('abbreviations.json')
    .then(res => res.json())
    .then(data => {
      const count = data.length;
      document.getElementById("abbrev-count").innerText = `${count} terms inside`;
    })
    .catch(() => {
      document.getElementById("abbrev-count").innerText = `Abbreviations`;
    });
</script>

      
      <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js"></script>
<script>
  const supabase = window.supabase.createClient(
    'https://gbqgtnukoucxagswqspx.supabase.co',
    'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImdicWd0bnVrb3VjeGFnc3dxc3B4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTA4ODcwNTAsImV4cCI6MjA2NjQ2MzA1MH0.uHqKZ-KnW1sv7CSD37D6dh1qYfSLMznud947DEZI93Q'
  );

  // ‚úÖ Redirect to login if not logged in
  supabase.auth.getSession().then(({ data: { session } }) => {
    if (!session) {
      window.location.href = 'login.html';
    }
  });

  // ‚úÖ Add Logout functionality
  const logoutBtn = document.createElement("button");
  logoutBtn.id = "logoutBtn";
  logoutBtn.textContent = "Logout";
  logoutBtn.onclick = async () => {
    await supabase.auth.signOut();
    window.location.href = "login.html";
  };
  document.querySelector("header").appendChild(logoutBtn);
</script>
<script>
  const name = localStorage.getItem('full_name');
  if (name) {
    document.getElementById('greeting').textContent = `Welcome, ${name}!`;
  }
</script>
      <script>
  async function deleteAccount() {
    const confirmDelete = confirm("Are you sure you want to delete your account? This action is permanent.");
    if (!confirmDelete) return;

    const { data: { user } } = await supabase.auth.getUser();
    if (!user) return alert("You're not logged in.");

    // Delete from your user table (optional)
    await supabase.from('profiles').delete().eq('id', user.id);

    alert("‚ö†Ô∏è Account deletion from Supabase Auth requires admin access. Contact admin to fully delete your account.");
    
    // Optional: Log out after deletion
    await supabase.auth.signOut();
    localStorage.removeItem('full_name');
    window.location.href = 'login.html';
  }
</script>
<script>
  const noticeList = document.getElementById('notices');
  const toggleBtn = document.getElementById('toggleNotice');
  const toast = document.getElementById("toast");
  const badge = document.getElementById('newBadge');
  const notifySound = document.getElementById('notifySound');

  toggleBtn.addEventListener('click', () => {
    noticeList.classList.toggle('show');
    toggleBtn.textContent = noticeList.classList.contains('show') ? 'Hide Notices' : 'Show Notices';
    if (noticeList.classList.contains('show')) {
      noticeList.style.maxHeight = "1000px";
      noticeList.style.display = "block";
      badge.style.display = "none";
      // When user reads, mark as seen
      const allIDs = Array.from(noticeList.querySelectorAll('li')).map(li => li.dataset.id);
      localStorage.setItem('seenNotices', JSON.stringify(allIDs));
    } else {
      noticeList.style.maxHeight = "0";
      setTimeout(() => { noticeList.style.display = "none"; }, 400);
    }
  });

  function playSound() {
    notifySound.play().catch(() => {
      document.body.addEventListener('click', () => notifySound.play(), { once: true });
    });
  }

  function showToast(msg) {
    toast.textContent = msg;
    toast.style.visibility = "visible";
    toast.className = "show";
    setTimeout(() => {
      toast.style.visibility = "hidden";
      toast.className = toast.className.replace("show", "");
    }, 3000);
  }

  function fetchNotices() {
    fetch('notices.json')
      .then(res => res.json())
      .then(data => {
        const seen = JSON.parse(localStorage.getItem('seenNotices') || '[]');
        const newOnes = [];

        noticeList.innerHTML = "";
        data.forEach(item => {
          const li = document.createElement('li');
          li.innerHTML = `<strong>${item.date}:</strong> ${item.message}`;
          li.dataset.id = item.id;
          noticeList.appendChild(li);

          if (!seen.includes(item.id)) {
            newOnes.push(item.id);
          }
        });

        if (newOnes.length > 0) {
          badge.style.display = 'inline';
          playSound();
          showToast("üì¢ New notice available!");
        }

        if (noticeList.classList.contains('show')) {
          localStorage.setItem('seenNotices', JSON.stringify(data.map(n => n.id)));
          badge.style.display = "none";
        }
      })
      .catch(err => {
        console.error("Notice loading error:", err);
        noticeList.innerHTML = "<li>Failed to load notices.</li>";
      });
  }

  fetchNotices();
  setInterval(fetchNotices, 10000); // repeat every 10 sec
</script>


<!-- üîä Unlock sound on first user click -->
<script>
  window.addEventListener('click', () => {
    const sound = new Audio("notify.mp3");
    sound.play().catch(() => {});
  }, { once: true });
</script>
  
</body>
</html>
